import{a as n,p as a}from"./chunk-UIGDSWPH-CtiJzZl8.js";import{t as m}from"./ToastProvider-DOBgYgXK.js";const c="turnTracker_defaultDisplayName",i="turnTracker_defaultColor";function g(){try{return{displayName:localStorage.getItem(c)||void 0,color:localStorage.getItem(i)||void 0}}catch(t){return console.warn("Failed to read profile from localStorage:",t),{}}}function x(t,e){try{t?localStorage.setItem(c,t):localStorage.removeItem(c),e?localStorage.setItem(i,e):localStorage.removeItem(i)}catch(l){console.warn("Failed to save profile to localStorage:",l)}}async function v(t,e,l){const r={};e!==void 0&&(r.display_name=e),l!==void 0&&(r.color=l),await t.connection.send("update_profile",r)}function S({onClose:t,ws:e}){const[l,r]=n.useState((e==null?void 0:e.displayName)||""),[s,d]=n.useState((e==null?void 0:e.color)||"");n.useEffect(()=>{console.log("Loading defaults from localStorage");const o=g();o.displayName&&r(o.displayName),o.color&&d(o.color)},[]);const u=async()=>{if(console.log("Saving profile",l,s),e)try{e.gameID&&await v(e,l||void 0,s||void 0)}catch(o){const f=o instanceof Error?o.message:"Failed to update profile";console.error("Options: ",f),m.error("Problem updating profile: "+f),t();return}x(l||void 0,s||void 0),t()},p=()=>{t()};return a.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Settings"}),a.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[a.jsx("input",{type:"text",value:l,onChange:o=>r(o.target.value),placeholder:"Display name",className:"flex-1 bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:border-cyan-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/20 transition-all duration-300"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("label",{children:"Default Color:"}),a.jsx("input",{type:"color",value:s,onChange:o=>d(o.target.value),className:"w-10 h-10 border-none"})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:p,className:"px-6 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:u,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Save"})]})]})}export{S as O,g};
